!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self)["quickapp-h5"]=t()}(this,function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i="quickAppScript";function r(e){var t=o(e);return"function"===t||"object"===t&&!!e}function p(e){e=e||function(){};if(!document.getElementById(i)){var t=document.createElement("script");t.setAttribute("id",i),t.type="text/javascript",!function(e){var t=(e=e||"").toLowerCase()||navigator.userAgent.toLowerCase();return!!/huawei|honor/.test(t)}()?t.src="https://statres.quickapp.cn/quickapp/js/routerinline.min.js":t.src="https://appimg.dbankcdn.com/hwmarket/files/fastapp/router.fastapp.js",t.onload=function(){e()},document.getElementsByTagName("head")[0].appendChild(t)}}return function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{packageName:"com.linksure.tt.quickapp",sourceName:""};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,p()}return function(e,t,o){t&&n(e.prototype,t),o&&n(e,o)}(t,[{key:"showError",value:function(e){console.warn("QuickApp error: ",e)}},{key:"showInfo",value:function(e,t){t=t||"",console.log("QuickApp debug: "+t,e)}},{key:"open",value:function(e){if(r(e))if(e.path)if(/^\//.test(e.path)){if(!e.params||r(e.params))return e.packageName||(e.packageName=this.config.packageName),e.openType&&"url"===e.openType?this.openAppRouter(e):(e.openType&&"deeplink"===e.openType||this.openAppRouter(e),this.openDeepLink(e)),!0;this.showError("options.params must be a object!")}else this.showError("options.path must start with /!");else this.showError("options.path is required fields!");else this.showError("options must be a object!")}},{key:"openAppRouter",value:function(e){var n;this.openAppRouterOnce(e)||!function e(t){var o=this;n=setTimeout(function(){void 0!==window.appRouter?(clearTimeout(n),o.openAppRouterOnce(t)):e(t)},600)}(e)}},{key:"openAppRouterOnce",value:function(e){return void 0!==window.appRouter&&(this.showInfo(e,"URL appRouter 方式跳转: "),e.confirm?window.appRouter(e.packageName,e.path,e.params,e.confirm):window.appRouter(e.packageName,e.path,e.params),!0)}},{key:"openDeepLink",value:function(e){var t="hap://app/"+e.packageName+e.path+"?"+function(e){if(!r(e))return"";var t=[];for(var o in e)t.push(o+"="+encodeURIComponent(e[o]));return t.join("&")}(e.params);this.showInfo(t,"Deeplink hap 方式跳转: "),function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="1px",t.style.height="1px",t.innerHTML='<iframe id="deeplink" src = "'+e+'"  scrolling = "no" width = "1" height = "1"></iframe>',document.body.appendChild(t)}(t)}}]),t}()});
